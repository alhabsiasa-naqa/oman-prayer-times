<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0a1929 0%, #1a2332 50%, #0a1929 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h2 {
            margin-bottom: 20px;
            color: #ffd700;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
            font-family: 'Cairo', sans-serif;
            direction: rtl;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.1);
        }

        .time-inputs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            width: 100%;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #0a1929;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 68, 68, 0.4);
        }

        .info-box {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box p {
            margin: 5px 0;
            line-height: 1.6;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #ffd700;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #ffd700;
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        .success-message {
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid rgba(0, 255, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .prayer-time-row {
            display: grid;
            grid-template-columns: 150px 1fr 1fr;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }

        .prayer-offset-row {
            display: grid;
            grid-template-columns: 100px 120px 100px 120px;
            gap: 10px;
            align-items: center;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .prayer-name {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .current-time {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffd700;
            text-align: center;
        }

        .offset-input {
            width: 100% !important;
            padding: 8px !important;
            text-align: center;
            font-weight: 600;
        }

        .new-time {
            font-size: 1.1rem;
            font-weight: 700;
            color: #4ade80;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        
        <h1>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
        <div class="card">
            <h2>ğŸ“Š Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
            <div class="info-box">
                <p><strong>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</strong> <span id="current-location">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span></p>
                <p><strong>ØµÙŠØºØ© Ø§Ù„ÙˆÙ‚Øª:</strong> <span id="current-format">12 Ø³Ø§Ø¹Ø©</span></p>
                <p style="display: none;"><strong>ÙØ§Ø±Ù‚ Ø§Ù„ØªÙˆÙ‚ÙŠØª:</strong> <span id="current-offset">0</span> Ø¯Ù‚ÙŠÙ‚Ø©</p>
            </div>
        </div>

        <!-- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ -->
        <div class="card">
            <h2>ğŸ“… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ</h2>
            <p style="margin-bottom: 15px; opacity: 0.9;">
                Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„Ù‡ Ø¨Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ Ø·Ø±Ø­ Ø£ÙŠØ§Ù…
            </p>

            <div class="form-group">
                <label>ÙØ§Ø±Ù‚ Ø§Ù„Ø£ÙŠØ§Ù…</label>
                <input type="number" id="hijri-offset" placeholder="0" value="0" min="-5" max="5">
                <small style="opacity: 0.8; display: block; margin-top: 5px;">
                    Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ÙˆØ¬Ø¨Ø© ØªØ¶ÙŠÙ Ø£ÙŠØ§Ù… (+1ØŒ +2)ØŒ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø³Ø§Ù„Ø¨Ø© ØªØ·Ø±Ø­ Ø£ÙŠØ§Ù… (-1ØŒ -2)
                </small>
            </div>

            <div class="info-box" style="margin-top: 15px;">
                <p><strong>Ù…Ø«Ø§Ù„:</strong></p>
                <p>â€¢ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ù…ØªØ£Ø®Ø± ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯ØŒ Ø£Ø¯Ø®Ù„: <strong>+1</strong></p>
                <p>â€¢ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ù…ØªÙ‚Ø¯Ù… ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯ØŒ Ø£Ø¯Ø®Ù„: <strong>-1</strong></p>
            </div>

            <button class="btn btn-primary" onclick="applyHijriOffset()">
                Ø­ÙØ¸ ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ
            </button>
            <button class="btn btn-secondary" onclick="resetHijriOffset()">
                Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† (Ø¨Ø¯ÙˆÙ† ÙØ§Ø±Ù‚)
            </button>
            <div class="success-message" id="hijri-success">
                âœ… ØªÙ… Ø­ÙØ¸ ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø¨Ù†Ø¬Ø§Ø­
            </div>
        </div>

        <!-- ØªØ¹Ø¯ÙŠÙ„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© Ø¨Ø§Ù„ÙØ§Ø±Ù‚ -->
        <div class="card">
            <h2>ğŸ•Œ ØªØ¹Ø¯ÙŠÙ„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© Ø¨Ø§Ù„ÙØ§Ø±Ù‚</h2>
            <p style="margin-bottom: 15px; opacity: 0.9;">
                Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù† API + Ø§Ù„ÙØ§Ø±Ù‚ Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ = Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯
            </p>

            <div style="display: grid; grid-template-columns: 100px 120px 100px 120px; gap: 10px; margin-bottom: 10px; font-weight: 700; opacity: 0.8; font-size: 0.9rem;">
                <div>Ø§Ù„ØµÙ„Ø§Ø©</div>
                <div>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                <div>Ø§Ù„ÙØ§Ø±Ù‚ (Ø¯Ù‚Ø§Ø¦Ù‚)</div>
                <div>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯</div>
            </div>

            <div class="prayer-offset-row">
                <div class="prayer-name">Ø§Ù„ÙØ¬Ø±</div>
                <div class="current-time" id="current-fajr">--:--</div>
                <input type="number" class="offset-input" id="offset-fajr" placeholder="0" value="0" oninput="calculateNewTime('fajr')">
                <div class="new-time" id="new-fajr">--:--</div>
            </div>

            <div class="prayer-offset-row">
                <div class="prayer-name">Ø§Ù„Ø´Ø±ÙˆÙ‚</div>
                <div class="current-time" id="current-sunrise">--:--</div>
                <input type="number" class="offset-input" id="offset-sunrise" placeholder="0" value="0" oninput="calculateNewTime('sunrise')">
                <div class="new-time" id="new-sunrise">--:--</div>
            </div>

            <div class="prayer-offset-row">
                <div class="prayer-name">Ø§Ù„Ø¸Ù‡Ø±</div>
                <div class="current-time" id="current-dhuhr">--:--</div>
                <input type="number" class="offset-input" id="offset-dhuhr" placeholder="0" value="0" oninput="calculateNewTime('dhuhr')">
                <div class="new-time" id="new-dhuhr">--:--</div>
            </div>

            <div class="prayer-offset-row">
                <div class="prayer-name">Ø§Ù„Ø¹ØµØ±</div>
                <div class="current-time" id="current-asr">--:--</div>
                <input type="number" class="offset-input" id="offset-asr" placeholder="0" value="0" oninput="calculateNewTime('asr')">
                <div class="new-time" id="new-asr">--:--</div>
            </div>

            <div class="prayer-offset-row">
                <div class="prayer-name">Ø§Ù„Ù…ØºØ±Ø¨</div>
                <div class="current-time" id="current-maghrib">--:--</div>
                <input type="number" class="offset-input" id="offset-maghrib" placeholder="0" value="0" oninput="calculateNewTime('maghrib')">
                <div class="new-time" id="new-maghrib">--:--</div>
            </div>

            <div class="prayer-offset-row">
                <div class="prayer-name">Ø§Ù„Ø¹Ø´Ø§Ø¡</div>
                <div class="current-time" id="current-isha">--:--</div>
                <input type="number" class="offset-input" id="offset-isha" placeholder="0" value="0" oninput="calculateNewTime('isha')">
                <div class="new-time" id="new-isha">--:--</div>
            </div>

            <button class="btn btn-primary" onclick="applyIndividualOffsets()">
                ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙˆØ§Ø±Ù‚ ÙˆØ­ÙØ¸ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª
            </button>
            <button class="btn btn-secondary" onclick="loadCurrentTimesFromAPI()">
                ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† API
            </button>
            <button class="btn btn-secondary" onclick="clearIndividualOffsets()">
                Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§Ø±Ù‚
            </button>
            <div class="success-message" id="manual-success">
                âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­
            </div>
        </div>

        <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
        <div class="card">
            <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h2>
            
            <div class="form-group">
                <label>ØµÙŠØºØ© Ø§Ù„ÙˆÙ‚Øª</label>
                <select id="time-format" onchange="updateTimeFormat()">
                    <option value="12">12 Ø³Ø§Ø¹Ø© (Øµ/Ù…)</option>
                    <option value="24">24 Ø³Ø§Ø¹Ø©</option>
                </select>
            </div>

            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¬Ø¯/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                <input type="text" id="mosque-name-input" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø³Ø¬Ø¯ Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ù‚Ø§Ø¨ÙˆØ³ Ø§Ù„Ø£ÙƒØ¨Ø±">
            </div>

            <button class="btn btn-primary" onclick="saveGeneralSettings()">
                Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </button>
            <div class="success-message" id="settings-success">
                âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­
            </div>
        </div>

        <!-- Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† -->
        <div class="card">
            <h2>ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†</h2>
            <p style="margin-bottom: 15px; opacity: 0.9;">
                Ø¥Ø¹Ø§Ø¯Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            </p>
            <button class="btn btn-danger" onclick="resetAllSettings()">
                Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </button>
        </div>
    </div>

    <script>
        let currentPrayerTimes = {};

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        function loadCurrentSettings() {
            const format = localStorage.getItem('use12HourFormat') === 'false' ? '24' : '12';
            const mosqueName = localStorage.getItem('mosqueName') || '';
            
            document.getElementById('time-format').value = format;
            document.getElementById('mosque-name-input').value = mosqueName;
            
            document.getElementById('current-offset').textContent = '0';
            document.getElementById('current-format').textContent = format === '12' ? '12 Ø³Ø§Ø¹Ø©' : '24 Ø³Ø§Ø¹Ø©';
            
            // ØªØ­Ù…ÙŠÙ„ ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ù…Ø­ÙÙˆØ¸
            loadSavedHijriOffset();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† API
            loadCurrentTimesFromAPI();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§Ø±Ù‚ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            loadSavedOffsets();
        }
        
        // ØªØ­Ù…ÙŠÙ„ ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ù…Ø­ÙÙˆØ¸
        function loadSavedHijriOffset() {
            const savedOffset = localStorage.getItem('hijriDateOffset');
            if (savedOffset) {
                document.getElementById('hijri-offset').value = savedOffset;
            }
        }
        
        // Ø­ÙØ¸ ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ
        function applyHijriOffset() {
            const offset = parseInt(document.getElementById('hijri-offset').value) || 0;
            localStorage.setItem('hijriDateOffset', offset.toString());
            
            alert('ØªÙ… Ø­ÙØ¸ ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ' + (offset > 0 ? '+' : '') + offset + ' ÙŠÙˆÙ…');
            
            window.location.href = 'index.html';
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ
        function resetHijriOffset() {
            document.getElementById('hijri-offset').value = 0;
            localStorage.removeItem('hijriDateOffset');
            
            alert('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙØ§Ø±Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ');
            
            window.location.href = 'index.html';
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† API
        async function loadCurrentTimesFromAPI() {
            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù…Ø³Ù‚Ø· ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ
                const lat = 23.5880;
                const lon = 58.3829;
                const url = `https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=4`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.code === 200) {
                    const timings = data.data.timings;
                    
                    currentPrayerTimes = {
                        fajr: timings.Fajr.substring(0, 5),
                        sunrise: timings.Sunrise.substring(0, 5),
                        dhuhr: timings.Dhuhr.substring(0, 5),
                        asr: timings.Asr.substring(0, 5),
                        maghrib: timings.Maghrib.substring(0, 5),
                        isha: timings.Isha.substring(0, 5)
                    };
                    
                    // Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                    document.getElementById('current-fajr').textContent = currentPrayerTimes.fajr;
                    document.getElementById('current-sunrise').textContent = currentPrayerTimes.sunrise;
                    document.getElementById('current-dhuhr').textContent = currentPrayerTimes.dhuhr;
                    document.getElementById('current-asr').textContent = currentPrayerTimes.asr;
                    document.getElementById('current-maghrib').textContent = currentPrayerTimes.maghrib;
                    document.getElementById('current-isha').textContent = currentPrayerTimes.isha;
                    
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                    ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'].forEach(prayer => {
                        calculateNewTime(prayer);
                    });
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª:', error);
                alert('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ù…Ù† API. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.');
            }
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙØ§Ø±Ù‚
        function calculateNewTime(prayer) {
            const currentTime = currentPrayerTimes[prayer];
            if (!currentTime) return;
            
            const offset = parseInt(document.getElementById(`offset-${prayer}`).value) || 0;
            
            const [hours, minutes] = currentTime.split(':').map(Number);
            const totalMinutes = hours * 60 + minutes + offset;
            const newHours = Math.floor((totalMinutes + 1440) / 60) % 24;
            const newMinutes = (totalMinutes + 1440) % 60;
            
            const newTime = `${String(newHours).padStart(2, '0')}:${String(newMinutes).padStart(2, '0')}`;
            document.getElementById(`new-${prayer}`).textContent = newTime;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙˆØ§Ø±Ù‚ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function loadSavedOffsets() {
            const savedOffsets = localStorage.getItem('individualPrayerOffsets');
            if (savedOffsets) {
                const offsets = JSON.parse(savedOffsets);
                Object.keys(offsets).forEach(prayer => {
                    const input = document.getElementById(`offset-${prayer}`);
                    if (input) {
                        input.value = offsets[prayer];
                        calculateNewTime(prayer);
                    }
                });
            }
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙˆØ§Ø±Ù‚ Ø§Ù„ÙØ±Ø¯ÙŠØ© ÙˆØ­ÙØ¸ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª
        function applyIndividualOffsets() {
            const offsets = {};
            const newTimes = {};
            
            ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'].forEach(prayer => {
                const offset = parseInt(document.getElementById(`offset-${prayer}`).value) || 0;
                const newTime = document.getElementById(`new-${prayer}`).textContent;
                
                offsets[prayer] = offset;
                newTimes[prayer] = newTime;
            });
            
            // Ø­ÙØ¸ Ø§Ù„ÙÙˆØ§Ø±Ù‚
            localStorage.setItem('individualPrayerOffsets', JSON.stringify(offsets));
            
            // Ø­ÙØ¸ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙƒØ£ÙˆÙ‚Ø§Øª ÙŠØ¯ÙˆÙŠØ©
            const manualTimes = {
                fajr: newTimes.fajr,
                sunrise: newTimes.sunrise,
                dhuhr: newTimes.dhuhr,
                asr: newTimes.asr,
                maghrib: newTimes.maghrib,
                isha: newTimes.isha
            };
            
            localStorage.setItem('manualPrayerTimes', JSON.stringify(manualTimes));
            localStorage.setItem('useManualTimes', 'true');
            
            showSuccess('manual-success');
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§Ø±Ù‚
        function clearIndividualOffsets() {
            ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'].forEach(prayer => {
                document.getElementById(`offset-${prayer}`).value = '0';
                calculateNewTime(prayer);
            });
            localStorage.removeItem('individualPrayerOffsets');
            localStorage.removeItem('manualPrayerTimes');
            localStorage.removeItem('useManualTimes');
            alert('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§Ø±Ù‚. Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©.');
        }

        // ØªØ­Ø¯ÙŠØ« ØµÙŠØºØ© Ø§Ù„ÙˆÙ‚Øª
        function updateTimeFormat() {
            const format = document.getElementById('time-format').value;
            localStorage.setItem('use12HourFormat', format === '12' ? 'true' : 'false');
            document.getElementById('current-format').textContent = format === '12' ? '12 Ø³Ø§Ø¹Ø©' : '24 Ø³Ø§Ø¹Ø©';
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        function saveGeneralSettings() {
            const mosqueName = document.getElementById('mosque-name-input').value;
            if (mosqueName) {
                localStorage.setItem('mosqueName', mosqueName);
            }
            showSuccess('settings-success');
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function resetAllSettings() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŸ')) {
                localStorage.clear();
                location.reload();
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
        function showSuccess(elementId) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            setTimeout(() => {
                element.style.display = 'none';
            }, 3000);
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', loadCurrentSettings);
    </script>
</body>
</html>
